<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Correction emojis food-widgets "tried"</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="responsive-iphone.css">
    <style>
        body {
            background: var(--background);
            padding: 20px;
            font-family: system-ui, -apple-system, sans-serif;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #1f2937;
            border-bottom: 2px solid #3b82f6;
            padding-bottom: 8px;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        
        .test-description {
            background: #f3f4f6;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-size: 14px;
            color: #4b5563;
        }
        
        .emoji-preview {
            display: inline-block;
            font-size: 24px;
            margin: 0 8px;
            vertical-align: middle;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            vertical-align: middle;
        }
        
        .status-ok { background: #10b981; }
        .status-error { background: #ef4444; }
        
        .instruction {
            background: #dbeafe;
            border: 1px solid #3b82f6;
            border-radius: 6px;
            padding: 12px;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .instruction strong {
            color: #1e40af;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Test - Correction emojis food-widgets "tried"</h1>
        
        <div class="instruction">
            <strong>üì± Test iPhone :</strong> Ouvrez ce fichier sur iPhone 13 ou iPhone avec Safari pour v√©rifier que les emojis restent visibles dans tous les cas.
        </div>
        
        <!-- Section 1: Food-widgets normaux -->
        <div class="test-section">
            <h3>üü¢ Food-widgets normaux (non go√ªt√©s)</h3>
            <div class="test-description">
                <span class="status-indicator status-ok"></span>
                Ces aliments ne sont pas encore go√ªt√©s. Les emojis doivent √™tre visibles normalement.
            </div>
            
            <div class="test-grid">
                <div class="food-widget">
                    <span class="food-emoji">üçé</span>
                    <h3 class="food-name">Pomme</h3>
                    <p class="food-benefits">Riche en fibres et vitamines</p>
                </div>
                
                <div class="food-widget">
                    <img src="icons/carotte.svg" class="custom-icon" alt="Carotte">
                    <h3 class="food-name">Carotte</h3>
                    <p class="food-benefits">Source de b√™ta-carot√®ne</p>
                </div>
                
                <div class="food-widget">
                    <span class="food-emoji">ü•ë</span>
                    <h3 class="food-name">Avocat</h3>
                    <p class="food-benefits">Graisses saines pour le d√©veloppement</p>
                </div>
            </div>
        </div>
        
        <!-- Section 2: Food-widgets "tried" -->
        <div class="test-section">
            <h3>‚úÖ Food-widgets "tried" (go√ªt√©s)</h3>
            <div class="test-description">
                <span class="status-indicator status-ok"></span>
                Ces aliments ont √©t√© go√ªt√©s depuis le calendrier. Les emojis doivent rester parfaitement visibles avec la bordure verte.
            </div>
            
            <div class="test-grid">
                <div class="food-widget tried">
                    <span class="food-emoji">üçå</span>
                    <h3 class="food-name">Banane</h3>
                    <p class="food-benefits">Potassium et √©nergie naturelle</p>
                </div>
                
                <div class="food-widget tried">
                    <img src="icons/courge.svg" class="custom-icon" alt="Courge">
                    <h3 class="food-name">Courge</h3>
                    <p class="food-benefits">Vitamines A et C</p>
                </div>
                
                <div class="food-widget tried">
                    <span class="food-emoji">ü•ï</span>
                    <h3 class="food-name">Carotte cuite</h3>
                    <p class="food-benefits">Digestion facilit√©e</p>
                </div>
                
                <div class="food-widget tried">
                    <img src="icons/brocoli.svg" class="custom-icon" alt="Brocoli">
                    <h3 class="food-name">Brocoli</h3>
                    <p class="food-benefits">Fer et vitamines du groupe B</p>
                </div>
            </div>
        </div>
        
        <!-- Section 3: Food-widgets "tried" avec √©valuations -->
        <div class="test-section">
            <h3>‚≠ê Food-widgets "tried" avec √©valuations</h3>
            <div class="test-description">
                <span class="status-indicator status-ok"></span>
                Ces aliments ont √©t√© go√ªt√©s ET √©valu√©s. Les emojis doivent rester visibles avec la note en coin.
            </div>
            
            <div class="test-grid">
                <div class="food-widget tried">
                    <div class="rating-display-corner">
                        <span class="rating-emoji-corner">üòç</span>
                    </div>
                    <span class="food-emoji">üçì</span>
                    <h3 class="food-name">Fraise</h3>
                    <p class="food-benefits">Vitamine C et antioxydants</p>
                </div>
                
                <div class="food-widget tried">
                    <div class="rating-display-corner">
                        <span class="rating-emoji-corner">üòä</span>
                    </div>
                    <img src="icons/courgette.svg" class="custom-icon" alt="Courgette">
                    <h3 class="food-name">Courgette</h3>
                    <p class="food-benefits">L√©g√®re et facile √† dig√©rer</p>
                </div>
                
                <div class="food-widget tried">
                    <div class="rating-display-corner">
                        <span class="rating-emoji-corner">üòê</span>
                    </div>
                    <span class="food-emoji">ü•í</span>
                    <h3 class="food-name">Concombre</h3>
                    <p class="food-benefits">Hydratation et fra√Æcheur</p>
                </div>
            </div>
        </div>
        
        <!-- R√©sum√© des corrections -->
        <div class="test-section" style="background: #f0fdf4; border-color: #10b981;">
            <h3 style="color: #059669; border-color: #10b981;">üìã R√©sum√© des corrections appliqu√©es</h3>
            
            <div style="margin: 15px 0;">
                <h4 style="color: #059669; margin-bottom: 8px;">‚úÖ Corrections CSS principales :</h4>
                <ul style="color: #065f46; line-height: 1.6;">
                    <li><strong>Visibilit√© forc√©e :</strong> <code>opacity: 1 !important; visibility: visible !important;</code></li>
                    <li><strong>Affichage garanti :</strong> <code>display: block !important;</code></li>
                    <li><strong>Tailles fixes :</strong> Emojis Apple 32px, ic√¥nes personnalis√©es 32px</li>
                    <li><strong>Responsive iPhone :</strong> 28px (‚â§430px), 26px (375-390px), 24px (‚â§375px)</li>
                    <li><strong>Effets hover maintenus :</strong> Scale 1.1x et filtre brightness</li>
                </ul>
            </div>
            
            <div style="margin: 15px 0;">
                <h4 style="color: #059669; margin-bottom: 8px;">üéØ Probl√®me r√©solu :</h4>
                <p style="color: #065f46; margin-bottom: 8px;">
                    Lorsqu'un aliment √©tait marqu√© comme "consomm√©" dans le calendrier, 
                    l'emoji/ic√¥ne pouvait dispara√Ætre ou changer d'apparence dans les pages fruits/l√©gumes.
                </p>
                <p style="color: #065f46;">
                    <strong>Solution :</strong> R√®gles CSS sp√©cifiques avec <code>!important</code> 
                    pour garantir l'affichage des emojis dans les <code>.food-widget.tried</code>
                </p>
            </div>
        </div>
        
        <div class="instruction">
            <strong>üîÑ Test de synchronisation :</strong> 
            1. Marquez un aliment comme consomm√© dans le calendrier<br>
            2. Allez dans la page fruits ou l√©gumes<br>
            3. V√©rifiez que l'emoji reste parfaitement visible avec la bordure verte<br>
            4. D√©cochez l'aliment du calendrier<br>
            5. V√©rifiez que l'emoji redevient normal (bordure grise)
        </div>
    </div>
    
    <script>
        // Script pour simuler l'interaction avec les food-widgets
        document.addEventListener('DOMContentLoaded', function() {
            const widgets = document.querySelectorAll('.food-widget');
            
            widgets.forEach(widget => {
                widget.addEventListener('click', function() {
                    console.log('Clicked:', widget.querySelector('.food-name').textContent);
                    
                    // Simuler l'ajout/suppression de la classe "tried"
                    if (widget.classList.contains('tried')) {
                        widget.classList.remove('tried');
                        console.log('Removed "tried" class');
                    } else {
                        widget.classList.add('tried');
                        console.log('Added "tried" class');
                    }
                });
            });
            
            // Test de conformit√© des emojis
            setTimeout(() => {
                console.log('üß™ Test de conformit√© des emojis:');
                
                const triedWidgets = document.querySelectorAll('.food-widget.tried');
                let allEmojisVisible = true;
                
                triedWidgets.forEach((widget, index) => {
                    const emoji = widget.querySelector('.food-emoji');
                    const icon = widget.querySelector('.custom-icon');
                    
                    const element = emoji || icon;
                    if (element) {
                        const style = window.getComputedStyle(element);
                        const opacity = parseFloat(style.opacity);
                        const visibility = style.visibility;
                        const display = style.display;
                        
                        const isVisible = opacity > 0 && visibility === 'visible' && display !== 'none';
                        
                        console.log(`Widget ${index + 1}:`, {
                            type: emoji ? 'emoji' : 'icon',
                            opacity: opacity,
                            visibility: visibility,
                            display: display,
                            isVisible: isVisible
                        });
                        
                        if (!isVisible) allEmojisVisible = false;
                    }
                });
                
                if (allEmojisVisible) {
                    console.log('‚úÖ Tous les emojis des food-widgets "tried" sont visibles !');
                } else {
                    console.log('‚ùå Certains emojis ne sont pas visibles');
                }
            }, 1000);
        });
    </script>
</body>
</html> 
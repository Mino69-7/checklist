<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Emojis Pr√©vention</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>üß™ Test Emojis Pr√©vention</h1>
        
        <div class="test-section">
            <h2>üö´ Aliments Interdits</h2>
            <div id="forbidden-test"></div>
        </div>
        
        <div class="test-section">
            <h2>‚ö†Ô∏è Aliments √† √âviter</h2>
            <div id="avoid-test"></div>
        </div>
        
        <div class="test-section">
            <h2>‚è∞ Aliments √† Introduire Plus Tard</h2>
            <div id="later-test"></div>
        </div>
    </div>

    <script src="icons.js"></script>
    <script>
        // Donn√©es de pr√©vention (copie de script.js)
        const preventionData = {
            forbidden: [
                { nom: "Miel", emoji: "üçØ", raison: "Risque de botulisme infantile" },
                { nom: "Lait de vache", emoji: "ü•õ", raison: "Difficile √† dig√©rer, carences" },
                { nom: "Fromage au lait cru", emoji: "üßÄ", raison: "Risque de list√©riose" },
                { nom: "≈íuf cru", emoji: "ü•ö", raison: "Risque de salmonellose" },
                { nom: "Poisson cru", emoji: "üç£", raison: "Risque bact√©rien et parasitaire" },
                { nom: "Viande crue", emoji: "ü•©", raison: "Risque de toxoplasmose" },
                { nom: "Alcool", emoji: "üç∑", raison: "Toxique pour le syst√®me nerveux" },
                { nom: "Th√© et caf√©", emoji: "‚òï", raison: "Caf√©ine n√©faste pour b√©b√©" },
                { nom: "√âdulcorants", emoji: "üß™", raison: "Substances chimiques non adapt√©es" }
            ],
            avoid: [
                { nom: "Sel", emoji: "üßÇ", raison: "Reins immatures, hypertension" },
                { nom: "Sucre blanc", emoji: "üç¨", raison: "Caries, addiction au sucre" },
                { nom: "Charcuterie", emoji: "ü•ì", raison: "Sel, nitrites, conservateurs" },
                { nom: "Fruits de mer", emoji: "ü¶ê", raison: "Allergies, m√©taux lourds" },
                { nom: "√âpices fortes", emoji: "üå∂Ô∏è", raison: "Irritation digestive" },
                { nom: "Chocolat", emoji: "üç´", raison: "Th√©obromine, sucre, allerg√®nes" },
                { nom: "Noix enti√®res", emoji: "ü•ú", raison: "Risque d'√©touffement" },
                { nom: "Bonbons durs", emoji: "üç≠", raison: "√âtouffement, sucre" },
                { nom: "Pop-corn", emoji: "üçø", raison: "Risque d'√©touffement" }
            ],
            later: [
                { nom: "Agrumes", emoji: "üçä", raison: "Introduire vers 8-10 mois" },
                { nom: "Fraise", emoji: "üçì", raison: "Allerg√®ne, attendre 8 mois" },
                { nom: "Kiwi", emoji: "ü•ù", raison: "Acidit√©, vers 8-10 mois" },
                { nom: "Tomate", emoji: "üçÖ", raison: "Acidit√©, vers 8 mois" },
                { nom: "√âpinards", emoji: "ü•¨", raison: "Nitrates, vers 8 mois" },
                { nom: "Betteraves", emoji: "ü•ï", raison: "Nitrates, vers 8 mois" },
                { nom: "L√©gumineuses", emoji: "ü´ò", raison: "Difficiles √† dig√©rer, vers 8 mois" },
                { nom: "C√©r√©ales avec gluten", emoji: "üçû", raison: "Introduire vers 6 mois progressivement" },
                { nom: "Produits laitiers", emoji: "üßÄ", raison: "Yaourt vers 6 mois, fromage vers 8 mois" }
            ]
        };

        // Fonction de test (copie de script.js avec logique de coh√©rence)
        function creerItemPreventionTest(aliment, cssClass, index) {
            const div = document.createElement('div');
            div.className = `prevention-item ${cssClass}`;
            div.style.animationDelay = `${index * 0.1}s`;
            
            // Mapping des noms de pr√©vention vers les noms du syst√®me d'emojis pour coh√©rence
            const mappingNoms = {
                'Betteraves': 'Betterave',
                'Agrumes': 'Orange',
                'L√©gumineuses': 'Haricot rouge',
                'C√©r√©ales avec gluten': 'Bl√©',
                'Produits laitiers': 'Fromage',
                'Fruits de mer': 'Crevette',
                '√âpices fortes': 'Piment',
                'Noix enti√®res': 'Noix',
                'Bonbons durs': 'Bonbon',
                'Sucre blanc': 'Sucre',
                'Fromage au lait cru': 'Fromage',
                '≈íuf cru': '≈íuf',
                'Poisson cru': 'Poisson',
                'Viande crue': 'Viande',
                'Th√© et caf√©': 'Caf√©',
                '√âdulcorants': 'Sucre'
            };
            
            let preventionIconHtml;
            let sourceInfo;
            
            // Si l'aliment a un mapping vers notre syst√®me d'emojis, l'utiliser pour coh√©rence
            if (mappingNoms[aliment.nom]) {
                const nomPourEmoji = mappingNoms[aliment.nom];
                const preventionIcon = EmojiManager.getAlimentIcon(nomPourEmoji);
                
                // V√©rifier si c'est le fallback pomme (indique que l'aliment n'existe pas dans notre syst√®me)
                if (preventionIcon.includes('üçé')) {
                    // Utiliser l'emoji original des donn√©es de pr√©vention
                    preventionIconHtml = `<span class="prevention-emoji">${aliment.emoji}</span>`;
                    sourceInfo = `Emoji original: ${aliment.emoji} (${nomPourEmoji} non trouv√© dans syst√®me)`;
                } else {
                    // Utiliser l'emoji/ic√¥ne du syst√®me pour coh√©rence
                    preventionIconHtml = preventionIcon.includes('custom-icon') ? 
                        preventionIcon.replace('class="custom-icon"', 'class="prevention-emoji"') : 
                        preventionIcon.replace('class="food-emoji"', 'class="prevention-emoji"');
                    sourceInfo = `Syst√®me EmojiManager: ${aliment.nom} ‚Üí ${nomPourEmoji} (${preventionIcon.includes('custom-icon') ? 'ic√¥ne personnalis√©e' : 'emoji Apple'})`;
                }
            } else {
                // Utiliser directement l'emoji d√©fini dans les donn√©es de pr√©vention
                preventionIconHtml = `<span class="prevention-emoji">${aliment.emoji}</span>`;
                sourceInfo = `Emoji original: ${aliment.emoji} (pas de mapping)`;
            }
            
            div.innerHTML = `
                ${preventionIconHtml}
                <div class="prevention-info">
                    <div class="prevention-name">${aliment.nom}</div>
                    <div class="prevention-reason">${aliment.raison}</div>
                    <div class="test-info">${sourceInfo}</div>
                </div>
            `;
            
            return div;
        }

        // G√©n√©rer les tests
        function genererTests() {
            // Test forbidden
            const forbiddenContainer = document.getElementById('forbidden-test');
            preventionData.forbidden.forEach((aliment, index) => {
                const item = creerItemPreventionTest(aliment, 'forbidden', index);
                forbiddenContainer.appendChild(item);
            });

            // Test avoid
            const avoidContainer = document.getElementById('avoid-test');
            preventionData.avoid.forEach((aliment, index) => {
                const item = creerItemPreventionTest(aliment, 'avoid', index);
                avoidContainer.appendChild(item);
            });

            // Test later
            const laterContainer = document.getElementById('later-test');
            preventionData.later.forEach((aliment, index) => {
                const item = creerItemPreventionTest(aliment, 'later', index);
                laterContainer.appendChild(item);
            });
        }

        // Lancer les tests au chargement
        document.addEventListener('DOMContentLoaded', genererTests);
    </script>

    <style>
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
        }
        
        .test-info {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }
        
        .prevention-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .prevention-emoji {
            font-size: 24px;
            margin-right: 15px;
            min-width: 30px;
        }
        
        .prevention-info {
            flex: 1;
        }
        
        .prevention-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .prevention-reason {
            color: #666;
            font-size: 14px;
        }
        
        .forbidden {
            border-left: 4px solid #ff4444;
        }
        
        .avoid {
            border-left: 4px solid #ff8800;
        }
        
        .later {
            border-left: 4px solid #0088ff;
        }
    </style>
</body>
</html> 